Вариант 7. Имитация отжига для TSP


Задача: реализовать метаэвристику имитация отжига для решения задачи коммивояжера.

Требования:
- Параметры: начальная температура, коэффициент охлаждения, количество итераций
- Использовать 2-opt обмен для построения соседних решений
- Вывести найденный маршрут и его стоимость
- Вывести количество улучшений на различных температурах
Входные данные:
Та же матрица расстояний для 8 городов
Начальная температура: 100
Коэффициент охлаждения: 0.95

АНАЛИТИКА АЛГОРИТМА

Итоговый код решает задачу коммивояжёра с помощью алгоритма имитации отжига, который работает следующим образом. 

Он начинает с произвольного маршрута и постепенно пытается улучшить его, случайно изменяя текущий маршрут с помощью 2-opt обменов (переворачивая подотрезки). При этом новые решения принимаются не только если они лучше, но и с некоторой вероятностью, зависящей от текущей «температуры», которая со временем понижается. Это позволяет алгоритму избегать попадания в локальные минимумы. По мере снижения температуры вероятность принятия худших решений падает, и поиск сужается на локальных оптимумах, приближаясь к хорошему решению задачи. 

В результате алгоритм находит качественную аппроксимацию оптимального маршрута обхода всех городов.Он сочетает стохастический поиск с локальной оптимизацией, балансируя исследование и эксплуатацию решений.

Таким образом, суть работы алгоритма — постепенное улучшение решения с контролируемым риском перейти к менее хорошему решению, чтобы найти глобально оптимальное или близкое к нему значение.




ВРЕМЕННАЯ СЛОЖНОСТЬ


Общая временная сложность кода имитации отжига для задачи коммивояжёра примерно равна $$O(N^2 \times I)$$, где:
- $$N$$ — число городов (в данном случае 8),
- $$I$$ — общее количество итераций (число температурных шагов умноженное на итерации на каждой температуре).

Объяснение сложности:

1. На каждой итерации алгоритма создаётся соседнее решение с помощью 2-opt обмена. 2-opt обмен — операция, которая за $$O(1)$$ времени меняет порядок маршрута (переворачивание подотрезка списка).

2. Однако для оценки стоимости нового маршрута функция пересчитывает длину всего маршрута, что требует обхода всех городов, то есть $$O(N)$$.

3. Перебор по шагам температуры и итерациям внутри каждого шага даёт примерно $$I$$ запусков.

4. Кроме того, в данном коде выбор индексов для 2-opt занимает $$O(1)$$, но пересчёт стоимости маршрута — ключевая операция, влияющая на время.

В сумме общая сложность порядка $$O(N \times I)$$. Поскольку $$I$$ задаётся как число температурных шагов $$\times$$ итераций на каждом шаге, и при $$N=8$$ значение $$N^2$$ можно считать условно, иногда приводят сложность как $$O(N^2 \times I)$$ исходя из того, что 2-opt иногда трактуется как $$O(N^2)$$ при тщательном переборе пар.


КОНТРОЛЬНЫЙ ВОПРОС №7. Коэффициент аппроксимации для составления расписания.


Доказательство коэффициента аппроксимации жадного алгоритма для задачи составления расписания на m машинах можно объяснить так:

Представим, что нам нужно распланировать выполнение n заданий на m машинах, чтобы минимизировать общее время завершения. Жадный алгоритм работает так: каждое новое задание назначается на машину с наименьшей на данный момент загруженностью.

Обозначим время завершения расписания, полученного жадным алгоритмом, как L, а оптимальное время (лучшее из возможных) как L*. Теперь посмотрим на машину с максимальной загруженностью по жадному расписанию — на ней надо выполнить последнее назначенное задание с временем выполнения t_j.

Перед этим заданием нагрузка этой машины была равна L минус t_j. Так как жадный алгоритм всегда выбирал машину с минимальной нагрузкой, то нагрузка на всех остальных машинах в этот момент была не меньше, чем L - t_j.

Если умножить L - t_j на число оставшихся m - 1 машин, то получим нижнюю границу общего времени выполнения заданий на этих машинах (без учета последнего задания на максимальной машине). Это время не может быть больше суммарного времени всех заданий кроме t_j.

Отсюда вытекает неравенство, которое позволяет выразить L через сумму всех заданий и время t_j.

С другой стороны, оптимальное время L* не может быть меньше максимального времени одного задания и не меньше среднего времени всех заданий на одну машину.

В итоге получается, что время завершения расписания жадного алгоритма L не превышает:

L ≤ L* + (1 - 1/m) * L* = (2 - 1/m) * L*.

То есть жадный алгоритм гарантирует, что его расписание будет не хуже оптимального более чем в 2 - 1/m раз.


